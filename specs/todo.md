# æœªä¾†é–‹ç™¼å¾…è¾¦äº‹é …

## Plaid æ•´åˆé€²éšåŠŸèƒ½

### å®‰å…¨æ€§å¢å¼·
- [ ] **æ•æ„Ÿè³‡æ–™åŠ å¯†**: å¯¦ä½œ Plaid access tokens å’Œå…¶ä»–æ•æ„Ÿè³‡æ–™çš„åŠ å¯†å­˜å„²
- [ ] **è³‡æ–™ä¿ç•™æ”¿ç­–**: å»ºç«‹ç”¨æˆ¶è³‡æ–™çš„ä¿ç•™å’Œåˆªé™¤æ”¿ç­–ï¼Œç¬¦åˆéš±ç§æ³•è¦
- [ ] **å­˜å–æ§åˆ¶**: å¯¦ä½œæ›´ç´°ç²’åº¦çš„è³‡æ–™å­˜å–æ§åˆ¶æ©Ÿåˆ¶

### äº¤æ˜“åˆ†é¡æ”¹é€²
- [ ] **è‡ªè¨‚åˆ†é¡é‚è¼¯**: é™¤äº†ä½¿ç”¨ Plaid æä¾›çš„åˆ†é¡å¤–ï¼Œå¯¦ä½œåŸºæ–¼ç”¨æˆ¶è¡Œç‚ºçš„è‡ªè¨‚åˆ†é¡
- [ ] **æ©Ÿå™¨å­¸ç¿’åˆ†é¡**: ä½¿ç”¨ ML æ¨¡å‹æ”¹é€²äº¤æ˜“åˆ†é¡çš„æº–ç¢ºæ€§
- [ ] **åˆ†é¡è¦å‰‡å¼•æ“**: å…è¨±ç”¨æˆ¶è‡ªå®šç¾©åˆ†é¡è¦å‰‡

### å³æ™‚åŠŸèƒ½
- [ ] **Plaid Webhooks**: å¯¦ä½œ webhook æ¥æ”¶å³æ™‚äº¤æ˜“æ›´æ–°
- [ ] **å³æ™‚é€šçŸ¥**: åŸºæ–¼ webhook çš„å³æ™‚äº¤æ˜“é€šçŸ¥ç³»çµ±
- [ ] **å¢é‡åŒæ­¥**: å„ªåŒ–äº¤æ˜“åŒæ­¥ï¼ŒåªåŒæ­¥æ–°å¢æˆ–æ›´æ”¹çš„äº¤æ˜“

### éŒ¯èª¤è™•ç†å’Œå¯é æ€§
- [ ] **é‡è©¦æ©Ÿåˆ¶**: å¯¦ä½œæŒ‡æ•¸é€€é¿çš„é‡è©¦ç­–ç•¥
- [ ] **å¤±æ•—äº¤æ˜“æ’éšŠ**: å»ºç«‹å¤±æ•—äº¤æ˜“çš„æ’éšŠå’Œé‡è©¦ç³»çµ±
- [ ] **å¥åº·æª¢æŸ¥**: å¯¦ä½œ Plaid API æœå‹™å¥åº·æª¢æŸ¥
- [ ] **é™ç´šç­–ç•¥**: ç•¶ Plaid API ä¸å¯ç”¨æ™‚çš„å‚™ç”¨æ–¹æ¡ˆ

### æ•ˆèƒ½å„ªåŒ–
- [ ] **æ‰¹é‡è™•ç†**: å„ªåŒ–äº¤æ˜“åŒ¯å…¥çš„æ‰¹é‡è™•ç†
- [ ] **å¿«å–ç­–ç•¥**: å¯¦ä½œé©ç•¶çš„å¿«å–æ©Ÿåˆ¶ä»¥æ¸›å°‘ API èª¿ç”¨
- [ ] **è³‡æ–™åº«å„ªåŒ–**: å„ªåŒ–å¤§é‡äº¤æ˜“è³‡æ–™çš„æŸ¥è©¢æ•ˆèƒ½

### ç”¨æˆ¶é«”é©—æ”¹é€²
- [ ] **é€£çµç‹€æ…‹ç®¡ç†**: æ›´å¥½çš„å¸³æˆ¶é€£çµç‹€æ…‹è¿½è¹¤å’Œç”¨æˆ¶åé¥‹
- [ ] **éŒ¯èª¤æ¢å¾©**: æä¾›ç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤æ¢å¾©é¸é …
- [ ] **é€£çµæ›´æ–°**: è™•ç†éæœŸçš„å¸³æˆ¶é€£çµå’Œé‡æ–°æˆæ¬Šæµç¨‹

## Kaggle æ•¸æ“šé›†æ•´åˆ

### æ•¸æ“šå°å…¥å’Œè™•ç†
- [ ] **Kaggle æ•¸æ“šé›†ä¸‹è¼‰**: è¨­å®šè‡ªå‹•ä¸‹è¼‰ Kaggle Credit Card Transactions Dataset
- [ ] **æ•¸æ“šæ¸…ç†å’Œé è™•ç†**: å¯¦ä½œæ•¸æ“šæ¸…ç†ã€æ ¼å¼åŒ–å’Œé©—è­‰é‚è¼¯
- [ ] **æ•¸æ“šå°å…¥è…³æœ¬**: å»ºç«‹è‡ªå‹•åŒ–è…³æœ¬å°‡ Kaggle æ•¸æ“šå°å…¥åˆ° PostgreSQL è³‡æ–™åº«
- [ ] **æ•¸æ“šåŒæ­¥æ©Ÿåˆ¶**: å¯¦ä½œå®šæœŸæ›´æ–°å’ŒåŒæ­¥ Kaggle æ•¸æ“šé›†çš„æ©Ÿåˆ¶
- [ ] **æ•¸æ“šå“è³ªæª¢æŸ¥**: å»ºç«‹æ•¸æ“šå®Œæ•´æ€§å’Œå“è³ªé©—è­‰æµç¨‹

### ML æ¨¡å‹è¨“ç·´åŸºç¤è¨­æ–½
- [ ] **è¨“ç·´æ•¸æ“šæº–å‚™**: å°‡ Kaggle æ•¸æ“šè½‰æ›ç‚ºé©åˆ ML æ¨¡å‹è¨“ç·´çš„æ ¼å¼
- [ ] **ç‰¹å¾µå·¥ç¨‹**: å¯¦ä½œç‰¹å¾µæå–å’Œå·¥ç¨‹åŒ–é‚è¼¯
- [ ] **æ•¸æ“šåˆ†å‰²**: å»ºç«‹è¨“ç·´/é©—è­‰/æ¸¬è©¦æ•¸æ“šé›†åˆ†å‰²æ©Ÿåˆ¶
- [ ] **æ•¸æ“šå¢å¼·**: å¯¦ä½œåˆæˆæ•¸æ“šç”Ÿæˆä»¥å¢å¼·è¨“ç·´æ•¸æ“šé›†
- [ ] **æ¨™ç±¤ç”Ÿæˆ**: åŸºæ–¼ Kaggle æ•¸æ“šç”Ÿæˆè¨“ç·´æ¨™ç±¤

### RecEngine ML æœå‹™å¯¦ä½œ
- [ ] **Trigger Classifier è¨“ç·´**: å¯¦ä½œäºŒå…ƒåˆ†é¡æ¨¡å‹è¨“ç·´é‚è¼¯
- [ ] **Reward Estimator è¨“ç·´**: å¯¦ä½œå›æ­¸æ¨¡å‹è¨“ç·´é‚è¼¯
- [ ] **Personalized Ranker è¨“ç·´**: å¯¦ä½œæ’åºæ¨¡å‹è¨“ç·´é‚è¼¯
- [ ] **Optimizer/Action Selector è¨“ç·´**: å¯¦ä½œçµ„åˆå„ªåŒ–æ¨¡å‹è¨“ç·´é‚è¼¯
- [ ] **æ¨¡å‹è©•ä¼°å’Œé©—è­‰**: å»ºç«‹æ¨¡å‹æ€§èƒ½è©•ä¼°å’Œé©—è­‰æ¡†æ¶

### æ¨¡å‹éƒ¨ç½²å’Œæ¨è«–
- [ ] **æ¨¡å‹åºåˆ—åŒ–**: å¯¦ä½œæ¨¡å‹ä¿å­˜å’Œè¼‰å…¥æ©Ÿåˆ¶
- [ ] **æ¨è«–æœå‹™**: å»ºç«‹æ¨¡å‹æ¨è«– API æœå‹™
- [ ] **æ¨¡å‹ç‰ˆæœ¬ç®¡ç†**: å¯¦ä½œæ¨¡å‹ç‰ˆæœ¬æ§åˆ¶å’Œ A/B æ¸¬è©¦
- [ ] **æ¨¡å‹ç›£æ§**: å»ºç«‹æ¨¡å‹æ€§èƒ½ç›£æ§å’Œæ¼‚ç§»æª¢æ¸¬
- [ ] **æ¨¡å‹æ›´æ–°**: å¯¦ä½œæ¨¡å‹é‡æ–°è¨“ç·´å’Œæ›´æ–°æ©Ÿåˆ¶

### æ•¸æ“šç®¡ç·šå’Œå·¥ä½œæµ
- [ ] **ETL ç®¡ç·š**: å»ºç«‹ Extract-Transform-Load æ•¸æ“šç®¡ç·š
- [ ] **æ‰¹é‡è™•ç†**: å¯¦ä½œå¤§è¦æ¨¡æ•¸æ“šæ‰¹é‡è™•ç†é‚è¼¯
- [ ] **æ’ç¨‹ç³»çµ±**: å»ºç«‹å®šæœŸæ•¸æ“šæ›´æ–°å’Œæ¨¡å‹é‡æ–°è¨“ç·´æ’ç¨‹
- [ ] **ç›£æ§å’Œè­¦å ±**: å¯¦ä½œæ•¸æ“šç®¡ç·šç›£æ§å’Œç•°å¸¸è­¦å ±ç³»çµ±
- [ ] **æ•¸æ“šå‚™ä»½**: å»ºç«‹æ•¸æ“šå‚™ä»½å’Œæ¢å¾©æ©Ÿåˆ¶

### æ•´åˆæ¸¬è©¦å’Œé©—è­‰
- [ ] **ç«¯åˆ°ç«¯æ¸¬è©¦**: å»ºç«‹å®Œæ•´çš„æ•¸æ“šæµç¨‹æ¸¬è©¦
- [ ] **æ¨¡å‹æº–ç¢ºæ€§é©—è­‰**: é©—è­‰æ¨¡å‹é æ¸¬çµæœèˆ‡å¯¦éš›æ•ˆæœçš„ä¸€è‡´æ€§
- [ ] **æ€§èƒ½åŸºæº–æ¸¬è©¦**: å»ºç«‹æ¨¡å‹æ¨è«–æ€§èƒ½åŸºæº–æ¸¬è©¦
- [ ] **è² è¼‰æ¸¬è©¦**: é©—è­‰ç³»çµ±åœ¨é«˜è² è¼‰ä¸‹çš„è¡¨ç¾
- [ ] **å›æ­¸æ¸¬è©¦**: ç¢ºä¿æ–°æ¨¡å‹ä¸æœƒé™ä½ç¾æœ‰åŠŸèƒ½çš„è¡¨ç¾

### å¯è¦–åŒ–å’Œåˆ†æå·¥å…·
- [ ] **æ•¸æ“šæ¢ç´¢å·¥å…·**: å»ºç«‹ Kaggle æ•¸æ“šé›†çš„å¯è¦–åŒ–æ¢ç´¢å·¥å…·
- [ ] **æ¨¡å‹è§£é‡‹æ€§**: å¯¦ä½œæ¨¡å‹æ±ºç­–çš„å¯è§£é‡‹æ€§åˆ†æ
- [ ] **æ€§èƒ½å„€è¡¨æ¿**: å»ºç«‹æ¨¡å‹æ€§èƒ½ç›£æ§å„€è¡¨æ¿
- [ ] **ç”¨æˆ¶è¡Œç‚ºåˆ†æ**: åˆ†æç”¨æˆ¶èˆ‡æ¨è–¦ç³»çµ±çš„äº’å‹•æ¨¡å¼
- [ ] **å•†æ¥­æŒ‡æ¨™è¿½è¹¤**: å»ºç«‹ ROI å’Œå…¶ä»–å•†æ¥­æŒ‡æ¨™çš„è¿½è¹¤ç³»çµ±

## RecEngine ML ç³»çµ±è©³ç´°å¯¦ä½œè¦æ ¼

### ğŸ“‹ é …ç›®æ¦‚è¿°

RecEngine æ˜¯ä¸€å€‹æ™ºèƒ½ä¿¡ç”¨å¡æ¨è–¦ ML ç³»çµ±ï¼ŒåŒ…å«4å€‹å°ˆé–€çš„æ©Ÿå™¨å­¸ç¿’æ¨¡å‹ï¼Œç‚ºç”¨æˆ¶æä¾›å€‹äººåŒ–çš„ä¿¡ç”¨å¡å»ºè­°ã€‚ç³»çµ±ä½¿ç”¨ Kaggle ä¿¡ç”¨å¡äº¤æ˜“è³‡æ–™é›†é€²è¡Œè¨“ç·´ï¼Œä¸¦é€éå¾Œç«¯ API æ•´åˆåˆ°ä¸»æ‡‰ç”¨ç¨‹å¼ä¸­ã€‚

**æŠ€è¡“æ£§é¸æ“‡:**
- **ML Framework**: Python + scikit-learn + LightGBM + pandas + numpy
- **API Framework**: FastAPI (Python) æˆ– Express.js (Node.js + Python bridge)
- **è³‡æ–™è™•ç†**: pandas + numpy + scikit-learn preprocessing
- **æ¨¡å‹éƒ¨ç½²**: Docker + REST API
- **ç›£æ§**: MLflow æˆ– Weights & Biases
- **è³‡æ–™åº«**: PostgreSQL (ä¸»è¦) + Redis (å¿«å–)

### ğŸ¯ é–‹ç™¼éšæ®µå’Œé‡Œç¨‹ç¢‘

#### éšæ®µ 1: åŸºç¤è¨­æ–½å’Œè³‡æ–™æº–å‚™ (é€±æ•¸: 2-3é€±)
#### éšæ®µ 2: æ¨¡å‹é–‹ç™¼å’Œè¨“ç·´ (é€±æ•¸: 4-6é€±)  
#### éšæ®µ 3: API æ•´åˆå’Œéƒ¨ç½² (é€±æ•¸: 2-3é€±)
#### éšæ®µ 4: æ¸¬è©¦å’Œå„ªåŒ– (é€±æ•¸: 2-3é€±)

### ğŸ“Š éšæ®µ 1: åŸºç¤è¨­æ–½å’Œè³‡æ–™æº–å‚™

#### 1.1 ç’°å¢ƒè¨­ç½®
- [ ] **Python ML ç’°å¢ƒè¨­ç½®**: å»ºç«‹ Python è™›æ“¬ç’°å¢ƒï¼Œå®‰è£å¿…è¦å¥—ä»¶
  ```bash
  # å»ºç«‹ requirements.txt
  pandas>=1.5.0
  numpy>=1.24.0
  scikit-learn>=1.3.0
  lightgbm>=4.0.0
  fastapi>=0.100.0
  uvicorn>=0.20.0
  pydantic>=2.0.0
  sqlalchemy>=2.0.0
  psycopg2-binary>=2.9.0
  redis>=4.5.0
  ```

- [ ] **ç›®éŒ„çµæ§‹è¨­è¨ˆ**: å»ºç«‹ ML é …ç›®çš„æ¨™æº–ç›®éŒ„çµæ§‹
  ```
  /recengine/
  â”œâ”€â”€ data/
  â”‚   â”œâ”€â”€ raw/           # åŸå§‹ Kaggle è³‡æ–™
  â”‚   â”œâ”€â”€ processed/     # è™•ç†å¾Œçš„è³‡æ–™
  â”‚   â””â”€â”€ features/      # ç‰¹å¾µå·¥ç¨‹çµæœ
  â”œâ”€â”€ models/
  â”‚   â”œâ”€â”€ trigger_classifier/
  â”‚   â”œâ”€â”€ reward_estimator/
  â”‚   â”œâ”€â”€ optimizer/
  â”‚   â””â”€â”€ ranker/
  â”œâ”€â”€ src/
  â”‚   â”œâ”€â”€ data_processing/
  â”‚   â”œâ”€â”€ feature_engineering/
  â”‚   â”œâ”€â”€ models/
  â”‚   â”œâ”€â”€ evaluation/
  â”‚   â””â”€â”€ api/
  â”œâ”€â”€ notebooks/         # Jupyter notebooks ç”¨æ–¼æ¢ç´¢
  â”œâ”€â”€ tests/
  â””â”€â”€ deployment/
  ```

- [ ] **Docker å®¹å™¨åŒ–**: å»ºç«‹ RecEngine çš„ Docker ç’°å¢ƒ
  ```dockerfile
  FROM python:3.11-slim
  # å®‰è£ç³»çµ±ä¾è³´
  # è¤‡è£½ä¸¦å®‰è£ Python å¥—ä»¶
  # è¨­å®šå·¥ä½œç›®éŒ„å’Œå•Ÿå‹•è…³æœ¬
  ```

#### 1.2 Kaggle è³‡æ–™ç²å–å’Œæ¢ç´¢
- [ ] **Kaggle API è¨­ç½®**: é…ç½® Kaggle API credentialsï¼Œè‡ªå‹•ä¸‹è¼‰è³‡æ–™é›†
  ```python
  # æ¨è–¦è³‡æ–™é›†:
  # 1. Credit Card Transactions Dataset
  # 2. Credit Card Customers Dataset  
  # 3. Credit Card Fraud Detection Dataset
  ```

- [ ] **è³‡æ–™æ¢ç´¢åˆ†æ (EDA)**: ä½¿ç”¨ Jupyter notebook é€²è¡Œè³‡æ–™æ¢ç´¢
  - è³‡æ–™ç¶­åº¦å’ŒåŸºæœ¬çµ±è¨ˆ
  - ç¼ºå¤±å€¼å’Œç•°å¸¸å€¼åˆ†æ
  - äº¤æ˜“æ¨¡å¼å’Œåˆ†å¸ƒåˆ†æ
  - ç”¨æˆ¶è¡Œç‚ºæ¨¡å¼è­˜åˆ¥
  - å¯è¦–åŒ–åˆ†æ (matplotlib + seaborn)

- [ ] **è³‡æ–™å“è³ªè©•ä¼°**: å»ºç«‹è³‡æ–™å“è³ªæª¢æŸ¥æµç¨‹
  ```python
  def assess_data_quality(df):
      # æª¢æŸ¥é‡è¤‡å€¼
      # æª¢æŸ¥ç¼ºå¤±å€¼æ¯”ä¾‹
      # æª¢æŸ¥æ•¸å€¼ç¯„åœåˆç†æ€§
      # æª¢æŸ¥åˆ†é¡è®Šæ•¸çš„åˆ†å¸ƒ
      # ç”Ÿæˆè³‡æ–™å“è³ªå ±å‘Š
  ```

#### 1.3 è³‡æ–™æ¸…ç†å’Œé è™•ç†
- [ ] **è³‡æ–™æ¸…ç†è…³æœ¬**: å»ºç«‹è‡ªå‹•åŒ–çš„è³‡æ–™æ¸…ç†æµç¨‹
  ```python
  def clean_transaction_data(raw_df):
      # ç§»é™¤é‡è¤‡äº¤æ˜“
      # è™•ç†ç¼ºå¤±å€¼ (å¡«å……æˆ–åˆªé™¤)
      # æ¨™æº–åŒ–é‡‘é¡æ ¼å¼
      # çµ±ä¸€å•†æˆ¶åç¨±æ ¼å¼
      # è™•ç†ç•°å¸¸äº¤æ˜“é‡‘é¡
      return cleaned_df
  ```

- [ ] **äº¤æ˜“åˆ†é¡æ¨™æº–åŒ–**: å»ºç«‹ä¸€è‡´çš„äº¤æ˜“åˆ†é¡ç³»çµ±
  ```python
  CATEGORY_MAPPING = {
      'groceries': ['grocery', 'supermarket', 'food store'],
      'dining': ['restaurant', 'cafe', 'food delivery'],
      'travel': ['airline', 'hotel', 'car rental'],
      'gas': ['gas station', 'fuel', 'petrol'],
      'shopping': ['retail', 'department store', 'online'],
      'utilities': ['electric', 'gas bill', 'water', 'internet'],
      'other': []  # å…¶ä»–æœªåˆ†é¡
  }
  ```

- [ ] **æ™‚é–“ç‰¹å¾µå·¥ç¨‹**: æå–æ™‚é–“ç›¸é—œç‰¹å¾µ
  ```python
  def extract_time_features(df):
      df['hour'] = df['timestamp'].dt.hour
      df['day_of_week'] = df['timestamp'].dt.dayofweek
      df['month'] = df['timestamp'].dt.month
      df['is_weekend'] = df['day_of_week'].isin([5, 6])
      df['is_holiday'] = df['date'].isin(holidays)
      return df
  ```

### ğŸ¤– éšæ®µ 2: æ¨¡å‹é–‹ç™¼å’Œè¨“ç·´

#### 2.1 Trigger Classifier (è§¸ç™¼åˆ†é¡å™¨)

**ç›®æ¨™**: åˆ¤æ–·æŸç­†äº¤æ˜“æ˜¯å¦éœ€è¦é¡¯ç¤ºã€Œæ›´å¥½ä¿¡ç”¨å¡ã€å»ºè­°

- [ ] **æ¨™ç±¤ç”Ÿæˆé‚è¼¯**: å»ºç«‹è¨“ç·´æ¨™ç±¤çš„è¦å‰‡
  ```python
  def generate_trigger_labels(transaction, user_cards, all_cards):
      """
      è¦å‰‡:
      1. å¦‚æœç”¨å…¶ä»–å¡ç‰‡å¯ä»¥ç²å¾— >= 2x çå‹µ -> 1 (è§¸ç™¼)
      2. å¦‚æœäº¤æ˜“é‡‘é¡ >= $100 ä¸”å¯ç¯€çœ >= $5 -> 1 (è§¸ç™¼)  
      3. å¦‚æœç”¨æˆ¶æ²’æœ‰è©²é¡åˆ¥çš„æœ€ä½³å¡ç‰‡ -> 1 (è§¸ç™¼)
      4. å…¶ä»–æƒ…æ³ -> 0 (ä¸è§¸ç™¼)
      """
      pass
  ```

- [ ] **ç‰¹å¾µå·¥ç¨‹**: å»ºç«‹æ¨¡å‹è¼¸å…¥ç‰¹å¾µ
  ```python
  TRIGGER_FEATURES = [
      # äº¤æ˜“ç‰¹å¾µ
      'transaction_amount',
      'category_encoded',
      'merchant_type',
      'time_features',
      
      # ç”¨æˆ¶ç‰¹å¾µ  
      'user_monthly_spending_by_category',
      'user_avg_transaction_amount',
      'user_card_count',
      'user_spending_diversity',
      
      # å¡ç‰‡çµ„åˆç‰¹å¾µ
      'current_card_reward_rate',
      'best_available_reward_rate', 
      'potential_reward_difference',
      'user_missing_categories'
  ]
  ```

- [ ] **æ¨¡å‹è¨“ç·´**: ä½¿ç”¨å¤šç¨®ç®—æ³•é€²è¡Œå¯¦é©—
  ```python
  # å€™é¸æ¨¡å‹:
  # 1. Logistic Regression (baseline)
  # 2. Random Forest
  # 3. LightGBM (æ¨è–¦)
  # 4. XGBoost
  
  def train_trigger_classifier():
      # è³‡æ–™åˆ†å‰² (70% train, 15% val, 15% test)
      # è™•ç†é¡åˆ¥ä¸å¹³è¡¡ (SMOTE æˆ– class weights)
      # äº¤å‰é©—è­‰
      # è¶…åƒæ•¸èª¿å„ª (Optuna æˆ– GridSearchCV)
      # æ¨¡å‹è©•ä¼° (Precision, Recall, F1, ROC-AUC)
  ```

- [ ] **æ¨¡å‹è©•ä¼°**: å»ºç«‹è©•ä¼°åŸºæº–
  ```python
  EVALUATION_METRICS = {
      'accuracy': 0.85,      # ç›®æ¨™æº–ç¢ºç‡
      'precision': 0.80,     # ç²¾ç¢ºç‡ (é¿å…éå¤šèª¤å ±)
      'recall': 0.75,        # å¬å›ç‡ (æ•æ‰é‡è¦æ©Ÿæœƒ)
      'f1_score': 0.77,      # F1 åˆ†æ•¸
      'roc_auc': 0.82        # ROC AUC
  }
  ```

#### 2.2 Reward Estimator (çå‹µä¼°ç®—å™¨)

**ç›®æ¨™**: é æ¸¬ä½¿ç”¨ä¸åŒä¿¡ç”¨å¡çš„å¹´åº¦çå‹µå·®ç•°

- [ ] **çå‹µè¨ˆç®—é‚è¼¯**: å»ºç«‹ç²¾ç¢ºçš„çå‹µè¨ˆç®—å¼•æ“
  ```python
  def calculate_annual_rewards(user_spending, card):
      """
      è¨ˆç®—ç”¨æˆ¶ä½¿ç”¨ç‰¹å®šå¡ç‰‡çš„å¹´åº¦çå‹µ:
      1. æŒ‰é¡åˆ¥è¨ˆç®—çå‹µ (è€ƒæ…®ä¸Šé™)
      2. æ‰£é™¤å¹´è²»
      3. è€ƒæ…®ç‰¹æ®Šå„ªæƒ å’Œä¿ƒéŠ·
      4. è¨ˆç®—æ·¨æ”¶ç›Š
      """
      total_rewards = 0
      for category, amount in user_spending.items():
          rate = card.get_reward_rate(category)
          cap = card.get_category_cap(category)
          reward = min(amount * rate, cap) if cap else amount * rate
          total_rewards += reward
      
      net_benefit = total_rewards - card.annual_fee
      return net_benefit
  ```

- [ ] **ç‰¹å¾µå·¥ç¨‹**: å»ºç«‹å›æ­¸æ¨¡å‹ç‰¹å¾µ
  ```python
  REWARD_FEATURES = [
      # ç”¨æˆ¶æ”¯å‡ºæ¨¡å¼
      'annual_spending_by_category',  # å„é¡åˆ¥å¹´åº¦æ”¯å‡º
      'spending_concentration',       # æ”¯å‡ºé›†ä¸­åº¦
      'spending_seasonality',         # å­£ç¯€æ€§æ¨¡å¼
      
      # å¡ç‰‡ç‰¹å¾µ
      'card_reward_rates',           # å„é¡åˆ¥çå‹µç‡
      'card_annual_fee',             # å¹´è²»
      'card_caps_and_limits',        # çå‹µä¸Šé™
      'card_bonus_categories',       # ç‰¹æ®Šçå‹µé¡åˆ¥
      
      # çµ„åˆç‰¹å¾µ
      'current_vs_candidate_rates',  # ç•¶å‰å¡ç‰‡ vs å€™é¸å¡ç‰‡
      'fee_payback_period',          # å¹´è²»å›æœ¬æœŸ
      'marginal_benefit_ratio'       # é‚Šéš›æ”¶ç›Šæ¯”
  ]
  ```

- [ ] **æ¨¡å‹è¨“ç·´**: å¤šæ¨¡å‹æ¯”è¼ƒ
  ```python
  # å€™é¸æ¨¡å‹:
  # 1. Linear Regression (baseline) 
  # 2. Random Forest Regressor
  # 3. LightGBM Regressor (æ¨è–¦)
  # 4. Neural Network (ç°¡å–®å‰é¥‹)
  
  def train_reward_estimator():
      # ç”Ÿæˆåˆæˆè¨“ç·´è³‡æ–™ (ç”¨æˆ¶æ”¯å‡º + å¡ç‰‡çµ„åˆ)
      # ç‰¹å¾µæ¨™æº–åŒ–å’Œé¸æ“‡
      # å›æ­¸æ¨¡å‹è¨“ç·´
      # è©•ä¼°æŒ‡æ¨™: RMSE, MAE, RÂ²
  ```

#### 2.3 Optimizer/Action Selector (å„ªåŒ–å™¨)

**ç›®æ¨™**: ç‚ºç”¨æˆ¶æ¨è–¦æœ€ä½³çš„å¡ç‰‡çµ„åˆç­–ç•¥

- [ ] **çµ„åˆå„ªåŒ–é‚è¼¯**: å»ºç«‹å¡ç‰‡çµ„åˆå„ªåŒ–ç®—æ³•
  ```python
  def optimize_card_portfolio(user_profile, available_cards):
      """
      å„ªåŒ–ç­–ç•¥:
      1. ADD_NEW: æ·»åŠ æ–°å¡ç‰‡ä»¥å¡«è£œçå‹µç¼ºå£
      2. REPLACE_EXISTING: ç”¨æ›´å¥½çš„å¡ç‰‡æ›¿æ›ç¾æœ‰å¡ç‰‡
      3. UPGRADE_CURRENT: å‡ç´šç¾æœ‰å¡ç‰‡ç­‰ç´š
      4. CONSOLIDATE: ç°¡åŒ–å¡ç‰‡çµ„åˆ
      """
      
      # ä½¿ç”¨éºå‚³ç®—æ³•æˆ–å‹•æ…‹è¦åŠƒæ‰¾æœ€å„ªçµ„åˆ
      # è€ƒæ…®ç´„æŸæ¢ä»¶ (ä¿¡ç”¨é¡åº¦ã€å¹´è²»ç¸½é¡ã€å¡ç‰‡æ•¸é‡)
      # æœ€å¤§åŒ–ç¸½çå‹µ - ç¸½å¹´è²»
  ```

- [ ] **æ’åºæ¨¡å‹è¨“ç·´**: å­¸ç¿’æ¨è–¦å¡ç‰‡çš„æ’åº
  ```python
  # ä½¿ç”¨ LightGBM Ranker æˆ– Learning-to-Rank
  def train_portfolio_optimizer():
      # ç”Ÿæˆç”¨æˆ¶-å¡ç‰‡å°çš„è¨“ç·´è³‡æ–™
      # åŸºæ–¼å„ªåŒ–é‚è¼¯ç”Ÿæˆæ’åºæ¨™ç±¤
      # è¨“ç·´ ranking æ¨¡å‹
      # è©•ä¼°: NDCG, MAP, MRR
  ```

#### 2.4 Personalized Ranker (å€‹äººåŒ–æ’åºå™¨)

**ç›®æ¨™**: ç‚ºé¦–é æ¨è–¦å¡ç‰‡é€²è¡Œå€‹äººåŒ–æ’åº

- [ ] **å”åŒéæ¿¾**: å»ºç«‹ç”¨æˆ¶ç›¸ä¼¼æ€§è¨ˆç®—
  ```python
  def compute_user_similarity(user_a, user_b):
      """
      è¨ˆç®—ç”¨æˆ¶ç›¸ä¼¼åº¦:
      1. æ”¯å‡ºæ¨¡å¼ç›¸ä¼¼åº¦ (é¤˜å¼¦ç›¸ä¼¼åº¦)
      2. äººå£çµ±è¨ˆç›¸ä¼¼åº¦ (å¹´é½¡ã€æ”¶å…¥ç­‰)
      3. å¡ç‰‡åå¥½ç›¸ä¼¼åº¦
      4. åœ°ç†ä½ç½®ç›¸ä¼¼åº¦
      """
      pass
  
  def collaborative_filtering_recommendations(user_id, k=10):
      # æ‰¾åˆ° k å€‹æœ€ç›¸ä¼¼ç”¨æˆ¶
      # æ ¹æ“šç›¸ä¼¼ç”¨æˆ¶çš„å¡ç‰‡åå¥½é€²è¡Œæ¨è–¦
      # çµåˆå…§å®¹ç‰¹å¾µ (hybrid approach)
  ```

- [ ] **æ’åºç‰¹å¾µ**: å»ºç«‹å€‹äººåŒ–æ’åºç‰¹å¾µ
  ```python
  RANKING_FEATURES = [
      # å€‹äººåŒ–ç‰¹å¾µ
      'user_demographic_match',      # ç”¨æˆ¶èˆ‡ç›®æ¨™ç¾¤é«”åŒ¹é…åº¦
      'spending_pattern_alignment',  # æ”¯å‡ºæ¨¡å¼èˆ‡å¡ç‰‡åŒ¹é…åº¦
      'similar_user_preferences',    # ç›¸ä¼¼ç”¨æˆ¶åå¥½
      
      # å¡ç‰‡ç‰¹å¾µ
      'card_popularity_score',       # å¡ç‰‡å—æ­¡è¿ç¨‹åº¦
      'card_approval_probability',   # æ‰¹å‡†æ¦‚ç‡
      'card_market_position',        # å¸‚å ´å®šä½
      
      # æ™‚é–“ç‰¹å¾µ
      'seasonal_relevance',          # å­£ç¯€æ€§ç›¸é—œåº¦
      'market_trends',               # å¸‚å ´è¶¨å‹¢
      'promotional_timing'           # ä¿ƒéŠ·æ™‚æ©Ÿ
  ]
  ```

- [ ] **å¤šç›®æ¨™å„ªåŒ–**: å¹³è¡¡æº–ç¢ºæ€§å’Œå¤šæ¨£æ€§
  ```python
  def diversified_ranking(candidates, user_profile, diversity_weight=0.3):
      """
      ç›®æ¨™å‡½æ•¸:
      Score = (1-Î») Ã— Relevance + Î» Ã— Diversity
      
      å…¶ä¸­:
      - Relevance: å€‹äººåŒ–ç›¸é—œåº¦åˆ†æ•¸
      - Diversity: æ¨è–¦åˆ—è¡¨å¤šæ¨£æ€§
      - Î»: å¤šæ¨£æ€§æ¬Šé‡
      """
      pass
  ```

### ğŸš€ éšæ®µ 3: API æ•´åˆå’Œéƒ¨ç½²

#### 3.1 RecEngine API æœå‹™
- [ ] **FastAPI æœå‹™**: å»ºç«‹ ML æ¨¡å‹ API æœå‹™
  ```python
  from fastapi import FastAPI
  from pydantic import BaseModel
  
  app = FastAPI(title="RecEngine ML Service")
  
  @app.post("/trigger-classify")
  async def classify_trigger(request: TriggerRequest):
      # è¼‰å…¥ Trigger Classifier æ¨¡å‹
      # ç‰¹å¾µé è™•ç†
      # æ¨¡å‹é æ¸¬
      # è¿”å›çµæœ
  
  @app.post("/estimate-rewards") 
  async def estimate_rewards(request: RewardRequest):
      # è¼‰å…¥ Reward Estimator æ¨¡å‹
      # è¨ˆç®—çå‹µå·®ç•°
      
  @app.post("/optimize-portfolio")
  async def optimize_portfolio(request: PortfolioRequest):
      # è¼‰å…¥ Optimizer æ¨¡å‹
      # ç”Ÿæˆå„ªåŒ–å»ºè­°
      
  @app.post("/personalized-ranking")
  async def personalized_ranking(request: RankingRequest):
      # è¼‰å…¥ Ranker æ¨¡å‹
      # å€‹äººåŒ–æ’åº
  ```

- [ ] **æ¨¡å‹è¼‰å…¥å’Œå¿«å–**: å„ªåŒ–æ¨¡å‹è¼‰å…¥æ€§èƒ½
  ```python
  class ModelManager:
      def __init__(self):
          self.models = {}
          self.load_all_models()
      
      def load_model(self, model_name):
          # å¾æª”æ¡ˆè¼‰å…¥æ¨¡å‹
          # å¿«å–åœ¨è¨˜æ†¶é«”ä¸­
          # å¯¦ä½œæ¨¡å‹ç‰ˆæœ¬ç®¡ç†
      
      def predict(self, model_name, features):
          # å–å¾—å¿«å–çš„æ¨¡å‹
          # åŸ·è¡Œé æ¸¬
          # è¿”å›çµæœ
  ```

#### 3.2 Node.js å¾Œç«¯æ•´åˆ
- [ ] **RecEngine å®¢æˆ¶ç«¯**: å»ºç«‹ Node.js åˆ° Python API çš„æ©‹æ¥
  ```typescript
  class RecEngineClient {
    private baseUrl: string;
    
    async classifyTrigger(data: TriggerData): Promise<TriggerResult> {
      // HTTP è«‹æ±‚åˆ° Python API
      // éŒ¯èª¤è™•ç†å’Œé‡è©¦é‚è¼¯
      // çµæœå¿«å–
    }
    
    async estimateRewards(data: RewardData): Promise<RewardResult> {
      // é¡ä¼¼å¯¦ä½œ
    }
    
    // å…¶ä»–æ–¹æ³•...
  }
  ```

- [ ] **å¿«å–ç­–ç•¥**: Redis å¿«å–é »ç¹æŸ¥è©¢çµæœ
  ```typescript
  class RecEngineCache {
    async getCachedResult(key: string): Promise<any> {
      // å¾ Redis å–å¾—å¿«å–çµæœ
    }
    
    async setCachedResult(key: string, result: any, ttl: number): Promise<void> {
      // è¨­å®šå¿«å–çµæœå’ŒéæœŸæ™‚é–“
    }
  }
  ```

#### 3.3 Docker éƒ¨ç½²
- [ ] **å®¹å™¨åŒ–éƒ¨ç½²**: Docker å¤šå®¹å™¨éƒ¨ç½²
  ```yaml
  # docker-compose.yml
  version: '3.8'
  services:
    recengine-ml:
      build: ./recengine
      ports:
        - "8000:8000"
      environment:
        - MODEL_PATH=/app/models
        - REDIS_URL=redis://redis:6379
      depends_on:
        - redis
        - postgres
    
    backend:
      build: ./backend
      environment:
        - RECENGINE_URL=http://recengine-ml:8000
      depends_on:
        - recengine-ml
  ```

### ğŸ“Š éšæ®µ 4: æ¸¬è©¦å’Œå„ªåŒ–

#### 4.1 æ¨¡å‹è©•ä¼°å’Œé©—è­‰
- [ ] **é›¢ç·šè©•ä¼°**: å»ºç«‹å®Œæ•´çš„è©•ä¼°æ¡†æ¶
  ```python
  def comprehensive_evaluation():
      # å„æ¨¡å‹çš„æº–ç¢ºæ€§è©•ä¼°
      # æ¥­å‹™æŒ‡æ¨™è©•ä¼° (é æœŸ CTR æå‡)
      # å»¶é²æ€§èƒ½æ¸¬è©¦
      # è¨˜æ†¶é«”ä½¿ç”¨è©•ä¼°
      # ç”Ÿæˆè©•ä¼°å ±å‘Š
  ```

- [ ] **A/B æ¸¬è©¦æº–å‚™**: å»ºç«‹ç·šä¸Š A/B æ¸¬è©¦åŸºç¤è¨­æ–½
  ```python
  def ab_test_setup():
      # æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
      # æµé‡åˆ†å‰²é‚è¼¯
      # æŒ‡æ¨™æ”¶é›†ç³»çµ±
      # çµ±è¨ˆé¡¯è‘—æ€§æ¸¬è©¦
  ```

#### 4.2 æ€§èƒ½å„ªåŒ–
- [ ] **æ¨è«–å„ªåŒ–**: æå‡æ¨¡å‹æ¨è«–é€Ÿåº¦
  ```python
  # å¯èƒ½çš„å„ªåŒ–ç­–ç•¥:
  # 1. ç‰¹å¾µé è¨ˆç®—å’Œå¿«å–
  # 2. æ¨¡å‹é‡åŒ– (å¦‚æœä½¿ç”¨æ·±åº¦å­¸ç¿’)
  # 3. æ‰¹é‡é æ¸¬
  # 4. ç•°æ­¥è™•ç†
  # 5. GPU åŠ é€Ÿ (å¦‚æœéœ€è¦)
  ```

- [ ] **å¿«å–ç­–ç•¥**: æ™ºèƒ½å¿«å–å¸¸è¦‹æŸ¥è©¢
  ```python
  def smart_caching_strategy():
      # ç”¨æˆ¶åå¥½å¿«å– (24å°æ™‚)
      # å¡ç‰‡çå‹µè¨ˆç®—å¿«å– (1é€±)
      # æ¨¡å‹é æ¸¬çµæœå¿«å– (1å°æ™‚)
      # æ’åºçµæœå¿«å– (30åˆ†é˜)
  ```

#### 4.3 ç›£æ§å’Œç¶­è­·
- [ ] **æ¨¡å‹ç›£æ§**: å»ºç«‹æ¨¡å‹æ€§èƒ½ç›£æ§
  ```python
  def model_monitoring():
      # é æ¸¬æº–ç¢ºåº¦è¿½è¹¤
      # è³‡æ–™æ¼‚ç§»æª¢æ¸¬ 
      # æ¨¡å‹é™ç´šæª¢æ¸¬
      # ç•°å¸¸é æ¸¬è­¦å ±
      # è‡ªå‹•æ¨¡å‹é‡æ–°è¨“ç·´è§¸ç™¼
  ```

- [ ] **æ¥­å‹™æŒ‡æ¨™è¿½è¹¤**: è¿½è¹¤ ML å°æ¥­å‹™çš„å½±éŸ¿
  ```python
  BUSINESS_METRICS = [
      'recommendation_click_through_rate',  # æ¨è–¦é»æ“Šç‡
      'card_application_conversion_rate',   # ç”³è«‹è½‰æ›ç‡
      'user_engagement_increase',           # ç”¨æˆ¶åƒèˆ‡åº¦æå‡
      'revenue_per_recommendation',         # æ¯æ¨è–¦æ”¶ç›Š
      'user_satisfaction_score'             # ç”¨æˆ¶æ»¿æ„åº¦
  ]
  ```

### ğŸ”§ æŠ€è¡“å¯¦ä½œç´°ç¯€

#### è³‡æ–™ç®¡ç·šæ¶æ§‹
```python
# ETL ç®¡ç·šè¨­è¨ˆ
class DataPipeline:
    def extract(self):
        # å¾ Kaggle API ä¸‹è¼‰è³‡æ–™
        # å¾ PostgreSQL æå–ç¾æœ‰è³‡æ–™
        
    def transform(self):
        # è³‡æ–™æ¸…ç†å’Œæ¨™æº–åŒ–
        # ç‰¹å¾µå·¥ç¨‹
        # è³‡æ–™é©—è­‰
        
    def load(self):
        # è¼‰å…¥åˆ°è¨“ç·´è³‡æ–™åº«
        # æ›´æ–°ç‰¹å¾µå•†åº—
        # è§¸ç™¼æ¨¡å‹é‡æ–°è¨“ç·´
```

#### ç‰¹å¾µå•†åº—è¨­è¨ˆ
```python
class FeatureStore:
    def store_user_features(self, user_id, features):
        # å„²å­˜ç”¨æˆ¶ç‰¹å¾µåˆ° Redis/PostgreSQL
        
    def get_user_features(self, user_id):
        # å¾å¿«å–æˆ–è³‡æ–™åº«ç²å–ç”¨æˆ¶ç‰¹å¾µ
        
    def batch_compute_features(self):
        # æ‰¹é‡è¨ˆç®—å’Œæ›´æ–°ç‰¹å¾µ
```

### ğŸ“ˆ æˆåŠŸæŒ‡æ¨™å’ŒKPI

#### æŠ€è¡“æŒ‡æ¨™
- **æ¨¡å‹æº–ç¢ºåº¦**: Trigger Classifier F1 > 0.77
- **é æ¸¬å“è³ª**: Reward Estimator RMSE < $50  
- **æ’åºå“è³ª**: Ranker NDCG@10 > 0.8
- **API å»¶é²**: 95% è«‹æ±‚ < 200ms
- **ç³»çµ±å¯ç”¨æ€§**: > 99.5% uptime

#### æ¥­å‹™æŒ‡æ¨™  
- **ç”¨æˆ¶åƒèˆ‡**: æ¨è–¦é»æ“Šç‡ > 15%
- **è½‰æ›æ•ˆæœ**: ç”³è«‹è½‰æ›ç‡ > 5%
- **ç”¨æˆ¶æ»¿æ„**: NPS > 7.0
- **æ”¶ç›Šå½±éŸ¿**: æ¯ç”¨æˆ¶å¹´åº¦æ”¶ç›Šå¢åŠ  > $100

### ğŸ—“ï¸ é–‹ç™¼æ™‚ç¨‹è¦åŠƒ

#### ç¬¬1-3é€±: ç’°å¢ƒè¨­ç½®å’Œè³‡æ–™æº–å‚™
- é€±1: Python ç’°å¢ƒã€Dockerã€åŸºç¤è¨­æ–½
- é€±2: Kaggle è³‡æ–™ç²å–ã€EDAã€è³‡æ–™æ¸…ç†
- é€±3: ç‰¹å¾µå·¥ç¨‹ã€è³‡æ–™ç®¡ç·šå»ºç«‹

#### ç¬¬4-9é€±: æ¨¡å‹é–‹ç™¼
- é€±4-5: Trigger Classifier é–‹ç™¼å’Œèª¿å„ª
- é€±6-7: Reward Estimator é–‹ç™¼å’Œèª¿å„ª  
- é€±8: Optimizer/Action Selector é–‹ç™¼
- é€±9: Personalized Ranker é–‹ç™¼

#### ç¬¬10-12é€±: æ•´åˆå’Œéƒ¨ç½²
- é€±10: FastAPI æœå‹™é–‹ç™¼
- é€±11: Node.js å¾Œç«¯æ•´åˆ
- é€±12: Docker éƒ¨ç½²å’Œæ¸¬è©¦

#### ç¬¬13-15é€±: æ¸¬è©¦å’Œå„ªåŒ–
- é€±13: å…¨é¢æ¸¬è©¦å’Œæ€§èƒ½èª¿å„ª
- é€±14: A/B æ¸¬è©¦æº–å‚™å’Œä¸Šç·š
- é€±15: ç›£æ§è¨­ç½®å’Œæ–‡æª”å®Œå–„

---

## å…¶ä»–ç³»çµ±æ”¹é€²

### ç›£æ§å’Œæ—¥èªŒ
- [ ] **è©³ç´°æ—¥èªŒ**: å¯¦ä½œçµæ§‹åŒ–æ—¥èªŒç³»çµ±
- [ ] **æ€§èƒ½ç›£æ§**: å¯¦ä½œæ‡‰ç”¨ç¨‹å¼æ€§èƒ½ç›£æ§ (APM)
- [ ] **éŒ¯èª¤è¿½è¹¤**: é›†æˆéŒ¯èª¤è¿½è¹¤æœå‹™ (å¦‚ Sentry)

### éƒ¨ç½²å’Œ DevOps
- [ ] **CI/CD ç®¡é“**: å»ºç«‹è‡ªå‹•åŒ–éƒ¨ç½²ç®¡é“
- [ ] **å®¹å™¨åŒ–**: å®Œæ•´çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] **è² è¼‰å‡è¡¡**: å¯¦ä½œè² è¼‰å‡è¡¡å’Œæ°´å¹³æ“´å±•

### æ¸¬è©¦è¦†è“‹
- [ ] **E2E æ¸¬è©¦**: ç«¯åˆ°ç«¯æ¸¬è©¦è¦†è“‹
- [ ] **è² è¼‰æ¸¬è©¦**: ç³»çµ±è² è¼‰å’Œå£“åŠ›æ¸¬è©¦
- [ ] **å®‰å…¨æ¸¬è©¦**: å®šæœŸçš„å®‰å…¨æ¼æ´æƒæ

### æ–‡æª”å’Œç¶­è­·
- [ ] **API æ–‡æª”**: å®Œæ•´çš„ API æ–‡æª” (OpenAPI/Swagger)
- [ ] **ç”¨æˆ¶æ‰‹å†Š**: ç”¨æˆ¶ä½¿ç”¨æŒ‡å—å’Œæ•…éšœæ’é™¤
- [ ] **é–‹ç™¼è€…æ–‡æª”**: é–‹ç™¼è€…è¨­å®šå’Œè²¢ç»æŒ‡å—

---

**æ³¨æ„**: æ­¤æ–‡ä»¶è¨˜éŒ„äº†ç•¶å‰å¯¦ä½œä¸­æš«æ™‚è·³éä½†æœªä¾†å¯èƒ½éœ€è¦çš„åŠŸèƒ½ã€‚è«‹å®šæœŸæª¢è¦–ä¸¦æ ¹æ“šæ¥­å‹™éœ€æ±‚èª¿æ•´å„ªå…ˆç´šã€‚